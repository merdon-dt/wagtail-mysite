{% extends "base.html" %}
{% load static wagtailimages_tags %}

{% block content %}
  <h1>{{ self.custom_title }}</h1>

  <!-- Server-side rendered fallback (optional) -->
  <div>
    {% for post in posts_limit %}
      {% image post.blog_image fill-300x200 as blog_img %}
      <div class="row mb-3">
        <div class="col-3">
          <a href="{{ post.url }}">
            <img src="{{ blog_img.url }}" alt="{{ blog_img.alt }}" class="img-fluid" />
          </a>
        </div>
        <div class="col-9">
          <a href="{{ post.url }}">{{ post.blog_title }}</a>
        </div>
      </div>
    {% endfor %}
  </div>

  <!-- React root and data (should appear only once) -->
  <script type="application/json" id="posts-data">
    {{ posts_json|safe }}
  </script>
  <div id="blog-page"></div>

  <!-- React JS bundle -->
  <script type="module" src="{% static 'js/react-widget.js' %}"></script>
{% endblock %}
